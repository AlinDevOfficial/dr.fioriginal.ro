// *ROM-Protect// Plugin OpenSource anti-IsFlooding/bug-fix pentru orice server. 
// Versiunea : 1.0.4s-dev. Bulid : 98. Data lansarii versiunii : 03.12.2016.
// Autor : lüxor # Dr.Fio & DR2.IND (+ eNd.) - SteamID (contact) : luxxxoor
// O productie FioriGinal.ro - site : www.fioriginal.ro
// Link forum de dezvoltare : http://forum.fioriginal.ro/amxmodx-plugins-pluginuri/rom-protect-anti-flood-bug-fix-t28292.html
// Link sursa : https://github.com/luxxxoor/ROM-Protect



// Verificare daca CFG-ul a fost executat cu succes.
echo "*ROM-Protect : Fisierul rom_protect.cfg a fost gasit. Incep protejarea serverului."

// Cvar      : rom_cmd_bug
// Scop      : Urmareste chat-ul si opeste bugurile de tip "client overflow" care dau crush client-elor jucatorilor.
// Impact    : Serverul nu pateste nimic, insa playerii acestuia primesc "quit" indiferent de ce client folosesc, iar serverul ramane gol.
// Nota      : -
// Update    : Incepand cu versiunea 1.0.1s, plugin-ul protejeaza serverele si de noul cmd-bug bazat pe caracterul '#'. Plugin-ul blocheaza de acum '#' si '%' in chat si '#' in nume.
// Update    : Incepand cu versiunea 1.0.3a, plugin-ul devine mai inteligent, si va bloca doar posibilele folosiri ale acestui bug, astfel incat caracterele '#' si '%' vor putea fi folosite, insa nu in toate cazurile.
// Update    : Incepand cu versiunea 1.0.3s, plugin-ul inlatura si bugul provotat de caracterul '+' in nume, acesta incercand sa deruteze playerii sau adminii (nu apare numele jucatorului in meniuri).
// Update    : Incepand cu versiunea 1.0.4b, plugin-ul verifica si comenzile de baza care pot elibera mesaje in chat (ex: amx_say, amx_psay, etc.), adica toate comenzile prezente in adminchat.amxx.
// Update    : Incepand cu versiunea 1.0.4f, plugin-ul devine mai indulgent cu jucatorii, si nu va mai inlocui caractere '#' si '+' cu un spatiu din nume, ci va pune un spatiu dupa acestea.
// Valoarea 0: Functia este dezactivata.
// Valoarea 1: Atacul este blocat. [Default]
rom_cmd_bug "1"

// Cvar      : rom_spec_bug
// Scop      : Urmareste activitatea jucatorilor si opreste schimbarea echipei la spectator daca acestia au deschis meniul de selectare al modelului, pentru a opri specbug.
// Impact    : Serverul primeste crash in momentul in care se apeleaza la acest bug.
// Update    : Incepand cu versiunea 1.0.4s, plugin-ul nu mai face greseli, astfel incat nu se vor mai face detectii false.
// Valoarea 0: Functia este dezactivata.
// Valoarea 1: Atacul este blocat. [Default]
rom_spec_bug "1"

// Cvar      : rom_autobuy_bug
// Scop      : Urmareste comenzile de tip autobuy/rebuy, iar daca acestea devin suspecte sunt oprite.
// Impact    : Serverul primeste crash in momentul in care se apeleaza la acest bug.
// Nota      : Serverele cu engine HLDS 6xxx nu mai sunt vulnerabile la acest bug.
// Valoarea 0: Functia este dezactivata.
// Valoarea 1: Atacul este blocat. [Default]
rom_autobuy_bug "0"

// Cvar      : rom_fake_players
// Scop      : Urmareste persoanele conectate pe server si intervine atunci cand numarul persoanelor cu acelasi ip il depaseste pe cel setat in cvarul rom_fake_players_limit.
// Impact    : Serverul poate sa fie tinut in loc (lumea asteptand dupa acesti jucatori sa moara, insa acestia nu o vor face), iar jucatorii morti vor parasi serverul.
// Nota      : Daca sunt mai multe persoane care impart aceasi legatura de internet pot fi banate (N minute), in acest caz ridicati cvarul : rom_fake_players_limit sau opriti rom_fake_players.
// Valoarea 0: Functia este dezactivata.
// Valoarea 1: Atacul este blocat prin ban 30 minute. [Default]
rom_fake_players "1"

// Cvar      : rom_fake_players_limit (Activat numai in cazul in care cvarul "rom_fake_players" este setat pe 1)
// Utilizare : Limiteaza numarul maxim de persoane de pe acelasi IP, blocand astfel atacurile tip fake-player.
// Nota      : Se recomanda ca acest cvar sa nu fie scazut sub valoarea "3".
rom_fake_players_limit "5"

// Cvar      : rom_fake_players_type (Activat numai in cazul in care cvarul "rom_fake_players" este setat pe 1)
// Utilizare : Selecteaza tipul de protectie impotriva fake-player-ilor.
// Nota      : In cazul in care sunt prea multi jucatori de pe acelasi ip, setati acest cvar pe valoarea "1".
// Valoarea 0: Daca sunt prea multi jucatori de pe acelasi ip, cei noi intrati vor primi kick.
// Valoarea 1: Daca sunt prea multi jucatori de pe acelasi ip, acestia vor primi ban. [Default]
rom_fake_players_type "1"

// Cvar      : rom_fake_players_punish  Activat numai in cazul in care cvarul "rom_fake_players_type" este setat pe 1)
// Utilizare : Blocheaza ip-ul atacatorului pentru un interval de timp, masurat in minute.
// Nota      : Recomandam sa nu setati o valoarea prea mare, deoarece in cazul unei detectari eronate jucatorii serverului pot avea de suferit.
rom_fake_players_punish "10"

// Cvar      : rom_delete_custom_hpk// Scop      : La finalul fiecarei harti, se va sterge fisierul custom.hpk.
// Impact    : Serverul experimenteaza probleme la schimbarea hartii, aceasta putand sa dureze si pana la 60secunde.
// Nota      : Eroarea "ERROR: couldn't open custom.hpk" poate fi ignorata, deoarece ea nu afecteaza serverul in nici un mod.
// Valoarea 0: Functie este dezactivata.
// Valoarea 1: Fisierul este sters. [Default]
rom_delete_custom_hpk "1"

// Cvar      : rom_delete_vault
// Scop      : La finalul fiecarei harti, se va sterge fisierul vault.ini.
// Impact    : Serverul experimenteaza probleme la schimbarea hartii, aceasta putand sa dureze si pana la 60secunde.
// Nota      : In cazul in care salvati anumite date in acest fisier ("vault.ini"), setati cvar-ul pe valoarea "0".
// Valoarea 0: Functie este dezactivata.
// Valoarea 1: Fisierul este sters si e setat "server_language en" in vault.ini. [Default]
// Valoarea 2: Fisierul este sters si e setat "server_language ro" in vault.ini.
rom_delete_vault "1"

// Cvar      : rom_advertise
// Efect     : Afiseaza un mesaj prin care anunta clientii ca serverul este protejat de *ROM-Protect.
// Nota      : Mesajul poate fi modificat din fisierul LANG. ("data/lang/rom_protect.txt")
// Valoarea 0: Mesajele sunt dezactivate.
// Valoarea 1: Mesajele sunt activate. [Default]
rom_advertise "1"

// Cvar      : rom_advertise_time (Activat numai in cazul in care cvarul "rom_advertise" este setat pe 1)
// Utilizare : Seteaza ca mesajul sa apara o data la N secunde.
// Nota      : Se recomanda sa nu setati acest cvar pe o valoare prea mica, altfel mesajul va face spam in chat.
rom_advertise_time "400"

// Cvar      : rom_warn
// Efect     : Afiseaza mesaje prin care anunta clientii care incearca sa distube activitatea normala a serverului.
// Nota      : Mesajele pot fi modificate din fisierul LANG. ("data/lang/rom_protect.txt")
// Valoarea 0: Mesajele sunt dezactivate.
// Valoarea 1: Mesajele sunt activate. [Default]
rom_warn "1"

// Cvar      : rom_log// Efect     : Permite pluginului sa inregistreze activiatatea sa (in log-uri separate).
// Nota      : Daca acest cvar este pornit, in consola serverlui vor fi printate mesajele intiparite in log.
// Valoarea 0: Functia este dezactivata.
// Valoarea 1: Functia este activata.
rom_log "1"

// Cvar      : rom_admi_login// Scop      : Permite autentificarea adminilor prin comanda "login parola" in consola (nu necesita setinfo)
// Impact    : Parolele adminilor sunt foarte usor de furat, e destul doar sa intri pe un server iar parola ta nu mai este in sigurata.
// Nota      : Adminurile se adauga normal "nume" "parola" "acces" "f".
// Update    : Incepand de la versiunea 1.0.3a, comanda in chat !login sau /login dispare, deoarece nu era folosita.
// Valoarea 0: Functie este dezactivata.
// Valoarea 1: Functia este activata. [Default]
rom_admin_login "1"

// Cvar      : rom_admin_login_file (Activat numai in cazul in care cvarul "rom_admin_login" este setat pe 1)
// Efect     : Selecteaza fisierul de unde sa fie citite adminele cu flag "f"
// Nota      : De preferat sa nu se suprapuna cu fisierul de adminurile "normale", altfel unele din adminele protejate pot fi incarcate de plugin-ul de baza, creeand neplaceri.
rom_admin_login_file "lista_gag2.ini"

// Cvar      : rom_admin_login_debug (Activat numai in cazul in care cvarul "rom_admin_login" este setat pe 1)
// Efect     : In cazul in care adminurile nu se incarca corect acesta va printa in consola serverului argumentele citite (nume - parola - acces - flag).
// Nota      : Daca funtia este pornita, poate crea lag, scopul ei este doar de a verifica daca adminurile sunt puse corect.
// Valoarea 0: Functie este dezactivata. [Default]
// Valoarea 1: Argumentele sunt printate in consola.
rom_admin_login_debug "0"

// Cvar      : rom_utf8_bom
// Scop      : Verifica fiecare fisier .res in maps, si daca descopera urme UTF8-BOM le elimina.
// Impact    : Serverul da crash cu eroarea : Host_Error: PF_precache_generic_I: Bad string.
// Nota      : Eroarea apare doar la versiunile de HLDS 6***.
// Valoarea 0: Functie este dezactivata.
// Valoarea 1: Fisierul este decontaminat. [Default]
rom_utf8_bom "1"

// Cvar      : rom_tag
// Utilizare : Seteaza tag-ul pluginului. (Numele acestuia)
// Nota      : De preferat numele tag-ului sa nu depaseasca 32 de caractere, altfel acesta nu va aparea cum trebuie in chat.
// Update    : Incepand de la versiunea 1.0.2s, plugin-ul *ROM-Protect devine mult mai primitor si te lasa chiar sa ii schimbi numele.
rom_tag "*ROM-Protect"

// Cvar      : rom_color_bug
// Scop      : Urmareste chatul si opeste bugurile de tip color-bug care alerteaza playerii si adminii.
// Impact    : Serverul nu pateste nimic, insa playerii sau adminii vor fi alertati de culorile folosite de unul din clienti.
// Nota      : Daca nu sunteti afectati de acest bug, se recomanda oprirea functiei.
// Valoarea 0: Functia este dezactivata.
// Valoarea 1: Bug-ul este blocat. [Default]
rom_color_bug "1"

// Cvar      : rom_motdfile
// Scop      : Urmareste activitatea adminilor prin comanda amx_cvar si incearca sa opreasca modificare cvarului motdfile intr-un fisier .ini.
// Impact    : Serverul nu pateste nimic, insa adminul care foloseste acest exploit poate fura date importante din server, precum lista de admini, lista de pluginuri etc.
// Nota      : In curand, se va folosi un algoritm mult mai bun si mai corect, insa doar pentru AMXX 1.8.3 .
// Update    : Incepand de la versiunea 1.0.4f, plugin-ul va bloca acest furt de informatii si prin comadna amx_rcon.
// Valoarea 0: Functia este dezactivata.
// Valoarea 1: Bug-ul este blocat. [Default]
rom_motdfile "1"

// Cvar      : rom_anti_pause
// Scop      : Urmareste ca plugin-ul de protectie "ROM-Protect" sa nu poata fi pus pe pauza de catre un raufacator.
// Impact    : Serverul nu mai este protejat de plugin, acesta fiind expus la mai multe exploituri.
// Nota      : Daca doriti sa puteti dezactiva plugin-ul, este recomadat sa setati acest cvar pe valoarea "0".
// Valoarea 0: Functia este dezactivata.
// Valoarea 1: Bug-ul este blocat. [Default]
rom_anti_pause "1"

// Cvar      : rom_anti_ban_class
// Scop      : Urmareste activitatea comezii amx_addban, astfel incat sa nu se poata da ban pe mai multe clase ip.
// Impact    : Serverul nu pateste nimic, insa daca se dau ban-uri pe clasa, foarte multi jucatori nu se vor mai putea conecta la server.
// Nota      : Functia nu urmareste decat comanda amx_addban.
// Valoarea 0: Functia este dezactivata.
// Valoarea 1: Functia va bloca comanda daca detecteaza ban-ul pe o clasa de ip.
// Valoarea 2: Functia va bloca comanda daca detecteaza ban-ul pe doua clase de ip. [Default]
// Valoarea 3: Functia va bloca comanda daca detecteaza ban-ul pe trei clase de ip.
// Valoarea 4: Functia va bloca comanda daca detecteaza ban-ul pe toate clasele de ip.
rom_anti_ban_class "2"

// Cvar      : rom_give_info
// Scop      : Serverul va trimite utilizatorului informatii despre plugin.
// Impact    : Cand cineva va scrie "rom_info" in consola, ii vor fi livrate informatiile (tot in consola).
// Nota      : Daca mesajul este transmis prin intermediul consolei serverului, acesta va primi cateva informatii suplimentare.
// Valoarea 0: Functia este dezactivata.
// Valoarea 1: Functia este activata. [Default]
rom_give_info "1"

// Cvar      : rom_xfakeplayer_spam
// Scop      : Blocheaza posibilele tentative de atacuri de boti, care au scop sa faca reclama la anumite servere in 2 modalitati.
// Impact    : Botii fac reclama la alte servere, enervand jucatorii/staff-ul serverului.
// Nota      : Daca un jucator scrie primul mesaj mai lung de N caractere (N = valoarea cvar-ului rom_xfakeplayer_spam_maxchars), acesta va fi blocat de catre plugin. (In cazul in care pluginul are valoarea 1)
// Valoarea 0: Functia este dezactivata.
// Valoarea 1: Pluginul va protejat serverul prin interzicerea primului say in chat, urmarind uratoarele say-uri daca sunt la fel, acesta va pedepsi acel client (Foloseste cvarurile de mai jos) [Default]
// Valoarea 2: Pluginul va interzice oricarui client sa scrie in chat pana cand nu va introduce un cod capcha in chat. (cod prestabilit sau cod la intamplare, asta se seteaza la cvar-ul rom_xfakeplayer_spam_capcha)
rom_xfakeplayer_spam "1"

// Cvar      : rom_xfakeplayer_spam_maxchars (Activat numai in cazul in care cvarul "rom_xfakeplayer_spam" este setat pe 1)
// Utilizare : Selecteaza numarul maxim de caractere care il poate scrie un jucator pentru ca acesta sa nu fie verificat si anulat.
// Nota      : Atentie, numarul de caractere trebuie sa nu fie mai mare de 15 caractere, altfel protectia va fi inutila.
// Valoarea 0: Functia este dezactivata.
// Valoarea 1: Functia este activata. [Default]
rom_xfakeplayer_spam_maxchars "12"

// Cvar      : rom_xfakeplayer_spam_maxsais (Activat numai in cazul in care cvarul "rom_xfakeplayer_spam" este setat pe 1)
// Utilizare : Selecteaza numarul mesajelor identice trimise pana cand ip-ul sa primeasca ban.
// Nota      : Atentie, numarul de mesaje identice trimise trebuie sa nu fie mai mic de 3, altfel protectia s-ar putea sa baneze unii jucatori.
rom_xfakeplayer_spam_maxsais "10"

// Cvar      : rom_xfakeplayer_spam_type (Activat numai in cazul in care cvarul "rom_xfakeplayer_spam" este setat pe 1)
// Utilizare : Selecteaza tipul de protectie impotriva botilor xfake-player.
// Nota      : Atentie, daca cvar-ul este setat pe valoarea "0", jucatorii xfake-player vor continua sa ramana pe server.
// Valoarea 0: Jucatorul nu va mai putea vorbi.
// Valoarea 1: Jucatorul va primi kick.
// Valoarea 2: Jucatorul va primi ban pentru o valoare setata in cvar-ul rom_xfakeplayer_spam_punish. [Default]
rom_xfakeplayer_spam_type "2"

// Cvar      : rom_xfakeplayer_spam_punish (Activat numai in cazul in care cvarul "rom_xfakeplayer_spam_type" este setat pe 2)
// Utilizare : Blocheaza ip-ul atacatorului pentru un interval de timp, masurat in minute.
// Nota      : Se recomanda sa nu se seteze o valoare prea mare pentru acest cvar, in cazul unei detectari false, jucatorul poate avea de suferit.
rom_xfakeplayer_spam_punish "5"

// Cvar      : rom_xfakeplayer_spam_capcha (Activat numai in cazul in care cvarul "rom_xfakeplayer_spam_type" este setat pe 2)
// Utilizare : Nu lasa clientii de pe server sa foloseasca chat-ul pana nu scriu in chat un anumit cod.
// Nota      : Daca aveti un server cu multi clienti straini, se recomanda valoarea 0.
// Valoarea 0: Chat-ul se va debloca printr-un cod prestabilit. (in cvarul rom_xfakeplayer_spam_capcha_word) [Default]
// Valoarea 1: Chat-ul se va debloca printr-un cod la intamplare (random).
rom_xfakeplayer_spam_capcha "0"

// Cvar      : rom_xfakeplayer_spam_capcha_word (Activat numai in cazul in care cvarul "rom_xfakeplayer_spam_capcha" este setat pe 0)
// Utilizare : Seteaza un cod prestabilit, iar prin scrierea codului in chat de catre client, 
// Nota      : De preferat codul sa nu contina prea multe caractere, unii clienti urasc sa scrie coduri lungi de pste 5 caractere.
// Update    : Incepand de la versiunea 1.0.2s, plugin-ul *ROM-Protect devine mult mai primitor si te lasa chiar sa ii schimbi numele.
rom_xfakeplayer_spam_capcha_word "/chat"

// Cvar      : rom_prot_cvars
// Scop      : Impiedica schimbarea cvar-elor acestui plugin. Permitand schimbarea lor doar din consola serverului sau din configurator.
// Impact    : Protectiile pot fi afectate, iar serverul este pus in pericol.
// Nota      : Daca doriti sa puteti schimba valorile din accesul de admin, cvar-ul va trebui setat pe valoarea "0".
// Valoarea 0: Functia este dezactivata.
// Valoarea 1: Functia este activata. [Default]
rom_prot_cvars "1"

// Cvar      : rom_console_say
// Scop      : Impiedica trimiterea mesajelor din consola, blocand astfel bindurile.
// Impact    : Opreste spam-ul si de ce nu, unele reclame.
// Nota      : Daca doriti sa adaugati cuvinte care sa reprezinte exceptii pentru acesta functie cuvintele trebuiesc scrise in fisierul "rom_protect.ini".
// Nota      : Aceasta protectie nu este perfecta, ci doar un filtu. Se poate trece usor de ea.// Valoarea 0: Functia este dezactivata.
// Valoarea 1: Functia este activata. [Default]
rom_console_say "1"

